
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="Ooyala Flex has 2 type of tags: User defined tags (Tags are added as a primitive in Metadata designer) Account tags (Old MAM tags will be called as Account tags) In order to migrate existing MAM tags ..." /><meta name="copyright" content="(C) Copyright 2018" /><meta name="DC.rights.owner" content="(C) Copyright 2018" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Upgrade Instructions 6.0.0 - Migrating MAM Tags from Mongo to ArangoDB " /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="id_Resource-Plugins" /><title>Upgrade Instructions 6.0.0 - Migrating MAM Tags from Mongo to ArangoDB </title><!--  Generated with Oxygen version 18.0, build number 2016081012.  --><meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <script>
          function debug(msg, object){
              console.log(msg, object);
          }
          function executeQuery(){
              return true;
          }
      </script>
      
        <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css" />
          
        <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_responsive_topic.css" />
          
        <!-- Latest compiled and minified Bootstrap CSS -->
        <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/bootstrap/css/bootstrap.min.css" />

        <!-- Bootstrap Optional theme -->
        <link rel="stylesheet" href="../oxygen-webhelp/resources/bootstrap/css/bootstrap-theme.min.css" />

        <!-- Changes and comments, as side-notes  -->
        <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/p-side-notes.css" />


        <!-- Template default styles  -->
        <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/resources/css/wt_default.css" />

        <script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.11.3.min.js"><!----></script>
        <script type="text/javascript" src="../oxygen-webhelp/resources/localization/strings.js"><!----></script>
        <script type="text/javascript" src="../oxygen-webhelp/resources/js/localization.js"><!----></script>
        <script type="text/javascript" src="../oxygen-webhelp/resources/js/parseuri.js"><!----></script>
        <script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script>
        <script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script>
        <script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script>
        
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/variants/tiles/orange/skin.css" /></head>

    <body onload="highlightSearchTerm()" class="wh_topic_page frmBody" id="id_Resource-Plugins">
        
        
<nav class="navbar navbar-default wh_header">
    <div class="container">
        <div class="navbar-header wh_logo_and_publication_title_container">
            <div class="wh_logo_and_publication_title navbar-brand">
                
                <a href="../index.html" class=" wh_logo hidden-xs "></a>
                <div class=" wh_publication_title "><a href="../index.html"><span class="title">Ooyala Flex 6.x Series Developer Content</span></a></div>
                
            </div>
            <!--
                        This component will be generated when the next parameters are specified in the transformation scenario:
                        'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                        See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
              -->
            <button type="button" data-target=".wh_top_menu_and_indexterms_link" data-toggle="collapse" class="navbar-toggle collapsed wh_toggle_button">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        
        <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse">
            
            
            <div class=" wh_top_menu "><ul><li><span class="topicref"><a href="../60/account_properties.html" data-id="id_account_properties">Account Properties</a></span></li><li><span class="topicref"><a href="../60/architecture.html" data-id="id_5.3.0Architecture">Architecture</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/configuration_manager_20.html" data-id="id_configuration_manager_20">Configuration Manager 2.0</a></span><ul><li><span class="topicref"><a href="../60/configuration_manager_20_access_configuration_manager.html" data-id="id_configuration_manager_20_access_configuration_manager">Accessing Configuration Manager</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_setting_up_configuration_manager.html" data-id="id_configuration_manager_20_setting_up_configuration_manager">Setting Up Configuration Manager</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_supported_objects.html" data-id="id_configuration_manager_20_supported_objects">Supported Objects</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_unsupported_objects.html" data-id="id_configuration_manager_20_unsupported_objects">Unsupported Object Types</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_concepts.html" data-id="id_configuration_manager_20_concepts">Basic Concepts</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_commands.html" data-id="id_configuration_manager_20_commands">Commands</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_testing.html" data-id="id_configuration_manager_20_testing">Testing Configuration Manager</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_change_requests.html" data-id="id_configuration_manager_20_change_requests">Change Requests</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_validation.html" data-id="id_configuration_manager_20_validation">Validation</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_visibility.html" data-id="id_configuration_manager_20_visibility">Visibility</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_bootstrapping.html" data-id="id_configuration_manager_20_bootstrapping">Bootstrapping Process</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_conflict_resolutions.html" data-id="id_configuration_manager_20_conflict_resolutions">Conflict Resolutions</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_additional_information.html" data-id="id_configuration_manager_20_additional_information">Additional Information</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_dependencies.html" data-id="id_configuration_manager_20_dependencies">Dependencies</a></span></li><li><span class="topicref"><a href="../60/configuration_manager_20_known_issues.html" data-id="id_configuration_manager_20_known_issues">Known Issues</a></span></li></ul></li><li><span class="topicref"><a href="../60/debugging_flex_advanced.html" data-id="id_DebuggingFlexAdvanced">Debugging Ooyala Flex (Advanced)</a></span></li><li><span class="topicref"><a href="../60/glossary_of_terms.html" data-id="id_GlossaryofTerms">Glossary of Terms</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/jef_programming_guide_introduction.html" data-id="id_jef_intro">JEF Programming Guide</a></span><ul><li><span class="topicref"><a href="../60/jef_programming_guide_what_is_jef.html" data-id="id_jef_what_is_jef">What is the Job Execution Framework?</a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_an_overview.html" data-id="id_jef_overview"> An Overview of JEF </a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_launching_jobs.html" data-id="id_jef_launching_jobs"> Launching Jobs from Ooyala Flex Enterprise </a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_lifecycle_overview.html" data-id="id_Jef_life_cycle_overview"> Life Cycle Overview </a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_mixing_jef_and_!jef.html" data-id="id_jef_mixing_jef_and_jef"> Mixing JEF Actions and Native Actions</a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_implementing_executor_services.html" data-id="id_jef_executor_services"> Implementing Executor Services </a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_action_plugin_configuration.html" data-id="id_jef_executor_services"> Action Plugin Configuration </a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_plugin_types.html" data-id="id_jef_plugin_types"> Enterprise Plugin Types</a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_implementing_actionconfig_and_execution_classes.html" data-id="id_jef_actionconfig_execution_classes"> Implementing Action Configuration and Execution Classes</a></span></li><li><span class="topicref"><a href="../60/jef_programming_guide_execution_context.html" data-id="id_jef_execution_context"> Execution Context</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/jef_programming_guide_job_life_cycle_states.html" data-id="id_jef_life_cycle_statuses"> Job Life Cycle Statuses</a></span><ul><li><span class="topicref"><a href="../60/jef_programming_guide_job_life_cycle_additional_info.html" data-id="id_jef_life_cycle_additional_info"> Job Life Cycle Statuses: Additional Information</a></span></li></ul></li><li><span class="topicref"><a href="../60/jef_programming_guide_acceptance_testing.html" data-id="id_jef_acceptance_testing"> Acceptance Testing for Actions and Resources</a></span></li></ul></li><li><span class="topicref"><a href="../60/transfer_server.html" data-id="id_TransferServer">Ooyala Flex Transfer Server</a></span></li><li><span class="topicref"><a href="../60/virtual_file_system.html" data-id="id_VirtualFileSystem">Ooyala Flex's "Virtual" File System</a></span></li><li><span class="topicref"><a href="../60/package_processing.html" data-id="PackageProcessing">Package Processing</a></span></li><li><span class="topicref"><a href="../60/performing_scripting_actions.html" data-id="id_PerformingScriptingActions">Performing Scripting Actions </a></span></li><li class=" has-children "><span class="topicref"><a href="../60/plugins_overview.html" data-id="id_plugins-anoverview">Plugins</a></span><ul><li class=" has-children "><span class="topicref"><a href="../60/action_plugins_60.html" data-id="id_ActionPlugins">Action Plugins</a></span><ul><li><span class="topicref"><a href="../60/action_plugins_60_analyse.html" data-id="id_action_plugins_55_transcode">Analyse</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_archive.html" data-id="id_action_plugins_55_archive">Archive Plugins</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_cancel.html" data-id="id_action_plugins_55_cancel">Cancel</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_start_session.html" data-id="id_action_plugins_55_open_session">Start Session</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_stop_session.html" data-id="id_action_plugins_55_closesession">Stop Session</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_copy.html" data-id="id_action_plugins_55_copy">Copy</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_create_object.html" data-id="id_action_plugins_55_create_object">Create Object</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_create_proxy.html" data-id="id_action_plugins_55_create_proxy">Create Proxy</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_delete.html" data-id="id_action_plugins_55_delete">Delete</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_deliver.html" data-id="id_action_plugins_55_deliver">Deliver</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_decision.html" data-id="id_action_plugins_55_workflows">Decision</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_divarchive.html" data-id="id_action_plugins_55_divarchive">DIVArchive</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_export.html" data-id="id_action_plugins_55_export">Export</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_extract.html" data-id="id_action_plugins_55_script">Extract</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_group.html" data-id="id_action_plugins_55_group">Group</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_import.html" data-id="id_action_plugins_55_import">Import</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_ingest.html" data-id="id_action_plugins_55_ingest">Ingest</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_inject.html" data-id="id_action_plugins_55_inject">Inject</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_launch.html" data-id="id_action_plugins_55_launch">Launch</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_message.html" data-id="id_action_plugins_55_message">Message</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_modify_action.html" data-id="id_action_plugins_55_modify_relationship">Modify Relationship</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_move.html" data-id="id_action_plugins_55_move">Move</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_parent.html" data-id="id_action_plugins_55_parent">Parent</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_player.html" data-id="id_action_plugins_55_player">Player</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_publish.html" data-id="id_action_plugins_55_publish">Publish</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_purge.html" data-id="id_action_plugins_55_purge">Purge</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_quality_control.html" data-id="id_action_plugins_55_quality_control">Quality Control</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_reimport.html" data-id="id_action_plugins_55_import">ReImport</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_rename.html" data-id="id_action_plugins_55_rename">Rename</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_republish.html" data-id="id_action_plugins_55_republish">Re-publish</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_restore.html" data-id="id_action_plugins_set_55_restore">Restore</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_script.html" data-id="id_action_plugins_55_script">Script</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_set_schema.html" data-id="id_action_plugins_55_set_schema">Set Schema</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_touch.html" data-id="id_action_plugins_55_touch">Touch</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_transcode.html" data-id="id_action_plugins_55_transcode">Transcode</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_transform.html" data-id="id_action_plugins_55_transform">Transform</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_unarchive.html" data-id="id_action_plugins_55_unarchive">Unarchive</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_unpublish.html" data-id="id_action_plugins_55_unpublish">Unpublish</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_validate.html" data-id="id_action_plugins_55_validate">Validate</a></span></li><li><span class="topicref"><a href="../60/action_plugins_60_wait.html" data-id="id_action_plugins_55_wait">Wait</a></span></li></ul></li><li><span class="topicref"><a href="../60/event_plugins.html" data-id="id_Event-Plugins">Event Plugins</a></span></li><li><span class="topicref"><a href="../60/adapter_plugins.html" data-id="id_adapter-plugins">Adapter Plugins</a></span></li><li><span class="topicref"><a href="../60/player_plugins.html" data-id="id_PlayerPlugins">Player</a></span></li><li><span class="topicref"><a href="../60/player_definitions_plugins_60.html" data-id="id_player_definitions_plugins">Player Definition Plugins</a></span></li><li><span class="topicref"><a href="../60/quota_plugins.html" data-id="id_Quota-Plugins">Quota Plugins</a></span></li><li><span class="topicref"><a href="../60/rename_plugins.html" data-id="id_RenamePlugins">Rename</a></span></li><li><span class="topicref"><a href="../60/report_plugins.html" data-id="id_ReportPlugins">Report Plugins</a></span></li><li><span class="topicref"><a href="../60/resource_plugins.html" data-id="id_Resource-Plugins">Resource Plugins</a></span></li><li><span class="topicref"><a href="../60/timed_action_plugins.html" data-id="id_TimedAction-Plugins">Timed Action Plugins</a></span></li><li><span class="topicref"><a href="../60/wizard_plugins.html" data-id="id_WizardPlugins">Wizard Plugins</a></span></li></ul></li><li><span class="topicref"><a href="../60/profile_types.html" data-id="id_profile_types">Profile Types</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/ooyala_flex_60_publish_api.html" data-id="id_ooyala_flex_55_publish_api">Publish API</a></span><ul><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_images.html" data-id="id_ooyala_flex_55_publish_api_images">Images</a></span></li><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_list_assets.html" data-id="id_ooyala_flex_55_publish_api_list_assets">List Assets</a></span></li><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_retrieve_assets.html" data-id="id_ooyala_flex_55_publish_api_retrieve_assets">Retrieve Assets</a></span></li><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_search_assets.html" data-id="id_ooyala_flex_55_publish_api_search_assets">Search Assets</a></span></li><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_retrieve_players.html" data-id="id_ooyala_flex_55_publish_api_retrieve_players">Retrieve Players</a></span></li><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_list_players.html" data-id="id_ooyala_flex_55_publish_api_list_players">List Players</a></span></li><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_player_rendering.html" data-id="id_ooyala_flex_55_publish_api_player_rendering">Player Rendering</a></span></li><li><span class="topicref"><a href="../60/ooyala_flex_60_publish_api_reindex.html" data-id="id_ooyala_flex_55_publish_api_reindex">Reindex</a></span></li><li><span class="topicref"><a href="../60/ooyala_fql.html" data-id="id_ooyala_fql">Ooyala Flex Query Language</a></span></li></ul></li><li><span class="topicref"><a href="../60/reindexing.html" data-id="id_action_plugins_55_inject">Reindexing</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/scripting.html" data-id="scripting">Scripting</a></span><ul><li class=" has-children "><span class="topicref"><a href="../60/technical_start_guide_intro.html" data-id="id_technical_start_guide_intro"> Technical Start Guide </a></span><ul><li><span class="topicref"><a href="../60/technical_start_guide_ide_setup.html" data-id="id_technical_start_guide_ide_setup"> IDE Setup </a></span></li><li><span class="topicref"><a href="../60/technical_start_guide_deployment.html" data-id="id_technical_start_guide_ide_setup"> Deployment</a></span></li><li><span class="topicref"><a href="../60/technical_start_guide_samples.html" data-id="id_technical_start_guide_samples"> Samples</a></span></li><li><span class="topicref"><a href="../60/technical_start_guide_uat_framework.html" data-id="id_technical_start_guide_uat_framework"> Unit Testing Framework </a></span></li></ul></li><li><span class="topicref"><a href="../60/expression_language.html" data-id="expression_langauge">Expression Language Script</a></span></li><li><span class="topicref"><a href="../60/scripting_hot_folder_variables.html" data-id="scripting">Hot Folder Variables</a></span></li><li><span class="topicref"><a href="../60/scripting_web_transfer_variables.html" data-id="scripting">Web Transfer Variables</a></span></li></ul></li><li><span class="topicref"><a href="../60/syntax.html" data-id="id_Syntax">Syntax</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/types_and_formats_introduction.html" data-id="id_TypesandFormats_intro">Types and Formats</a></span><ul><li><span class="topicref"><a href="../60/types_and_formats_file_formats.html" data-id="id_TypesandFormats_file_formats">Supported File Formats</a></span></li><li><span class="topicref"><a href="../60/types_and_formats_object_types.html" data-id="id_TypesandFormats_object_types">Object Types </a></span></li><li><span class="topicref"><a href="../60/types_and_formats_metadata_field_types.html" data-id="id_TypesandFormats_metadata_field_types">Metadata Field Types </a></span></li><li><span class="topicref"><a href="../60/types_and_formats_event_types.html" data-id="id_TypesandFormats_event_types">Event Types</a></span></li><li><span class="topicref"><a href="../60/types_and_formats_action_types.html" data-id="id_TypesandFormats">Action Types</a></span></li></ul></li><li><span class="topicref"><a href="../60/system_properties.html" data-id="id_system_properties"> System Properties</a></span></li><li><span class="topicref"><a href="../60/third_party_integrations.html" data-id="id_3rdPartyIntegrations">3rd Party Integrations</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/upgrade_instructions.html" data-id="id_action_plugins_55_group">Upgrade Instructions</a></span><ul><li class=" has-children "><span class="topicref"><a href="../60/upgrade_instructions_620.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.2.0</a></span><ul><li><span class="topicref"><a href="../60/upgrade_instructions_620_reindexing_process.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.2.0 - Reindexing Process </a></span></li><li><span class="topicref"><a href="../60/upgrade_instructions_620_publish_reindexing_process.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.2.0 - Publish Reindexing Process </a></span></li></ul></li><li><span class="topicref"><a href="../60/upgrade_instructions_602.html" data-id="id_Resource-Plugins">Upgrade Instructions for 6.0.2</a></span></li><li class=" has-children "><span class="topicref"><a href="../60/upgrade_instructions_60.html" data-id="id_Resource-Plugins">Upgrade Instructions for 6.0.0</a></span><ul><li><span class="topicref"><a href="../60/upgrade_instructions_60_consul_upgrade.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.0.0 - Upgrading Consul</a></span></li><li><span class="topicref"><a href="../60/upgrade_instructions_60_creating_events_index.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.0.0 - Creating Events Index</a></span></li><li><span class="topicref"><a href="../60/upgrade_instructions_60_upgrade_mongo_event_object_field_names.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.0.0 - Upgrading the Mongo Event Object Field Names </a></span></li><li><span class="topicref"><a href="../60/upgrade_instructions_60_reindex_search_elastic_data.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.0.0 - Reindexing Search Elastic Data</a></span></li><li><span class="topicref"><a href="../60/upgrade_instructions_60_migrating_mam_tags_from_mongo.html" data-id="id_Resource-Plugins">Upgrade Instructions 6.0.0 - Migrating MAM Tags from Mongo to ArangoDB  </a></span></li></ul></li></ul></li></ul></div>
            
        </div>
    </div>
</nav>

        <div class=" wh_search_input "><form onsubmit="return executeQuery();" id="searchForm" method="get" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" /><button type="submit" class="wh_search_button"><span>Search</span></button></div></form></div>
        
        <div class="container">
            <div class="row">

                <nav class="wh_tools hidden-print">
                    <div class=" wh_breadcrumb "><ol class="hidden-print"><li><span class="home"><a href="../index.html"><span>Home</span></a></span></li></ol></div>

                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links" class="navheader"></span></div>
                        <div class=" wh_print_link print "><a href="javascript:window.print();" title="Print this page"></a></div>
                    </div>
                </nav>
            </div>

            <div class="row wh_content_area">

                <div class=" wh_topic_content col-lg-8 col-md-8 col-sm-8 col-xs-12 body  "><main role="main"><article role="article" aria-labelledby="ariaid-title1">
	<h1 class="title topictitle1" id="ariaid-title1">Upgrade Instructions 6.0.0 -  Migrating MAM Tags from Mongo to ArangoDB  </h1>

<div class="body conbody">
        <section class="section">
            <p class="p"> Ooyala Flex has 2 type of tags:</p>

            <div class="p">
                <ul class="ul" id="id_Resource-Plugins__ul_cd3_ymx_w1b">
                    <li class="li"> User defined tags (Tags are added as a primitive in Metadata designer) </li>

                    <li class="li"> Account tags (Old MAM tags will be called as Account tags) </li>

                </ul>

            </div>

            <p class="p"> In order to migrate existing MAM tags from MongoDB to ArangoDB, the Tags
                migrator has been written. Follow the instructions specified below to start the
                migration. </p>

           </section>

    <section class="section"><h2 class="title sectiontitle">Download the Migrator JAR File</h2>
        
        <p class="p">You can find the migrator in
                artifactory: https://artifactory.nativ-systems.com/artifactory/webapp/#/artifacts/browse//search/quick/eyJzZWFyY2giOiJxdWljayIsInF1ZXJ5IjoiKnRhZ3MtbWlncmF0aW9uKmphciIsInNlbGVjdGVkUmVwb3NpdG9yaWVzIjpbXX0= </p>

        <p class="p">Ensure that you download the latest non-snapshot version (eg. tags-migration-0.0.1-jar-with-dependencies.jar)
        </p>

    </section>

    <section class="section"><h2 class="title sectiontitle">Create configuration file</h2>
        
        <p class="p">Download <a class="xref" href="database-migration.properties">database-migration.properties</a> and edit to make sure all the properties
                are set correctly:</p>

            <p class="p"> The mongo.host property needs to point at the current Mongo primary. You can find
                the IP address of the primary by running the following command: </p>

        <pre class="pre codeblock"><code>mongo --host your-mongo-host --eval 'rs.status().members.find(r=&gt;r.state===1).name'</code></pre>
        <p class="p">The ArangoDB port needs to be 7001 (it has to point at a coordinator ArangoDB node in a distributed ArangoDB installation. The host can be any host running an instance of ArangoDB coordinator.</p>

        <p class="p">See the migrator configuration section below for a full description of configuration options.
        </p>

    </section>

    <section class="section"><h2 class="title sectiontitle">Launch the application</h2>
        
        <pre class="pre codeblock"><code>
            java -jar tags-migration-0.0.1-jar-with-dependencies.jar -c database-migration.properties
        </code></pre>
        <p class="p">You should see a message similar to this:</p>

        <pre class="pre codeblock"><code>
2017-08-14 13:33:23.073 [main] INFO  c.flex.tags.migration.MongoToArango - Config : Config: {arango.db.no.auth.enabled=false, arango.port=7001, arango.collection.objects=objects, mongo.port=27017, mongo.projection={'objectId':1, 'objectType':1, 'name':1, 'accountId':1, 'workspaceId':1, 'userId': 1}, arango.db=flex-tag, mongo.host=localhost, arango.host=localhost, mongo.batch_size=20, arango.collection.tagCollections=tagCollections, mongo.query={}, arango.collection.tags=tags, arango.user.password=password, mongo.db=flex-tag, arango.graph.edge=objectTagsEdge, arango.user.name=root, mongo.collection=tags, arango.graph=objectTagsRelationships}
2017-08-14 13:33:23.185 [main] INFO  org.mongodb.driver.cluster - Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}
2017-08-14 13:33:23.268 [main] INFO  org.mongodb.driver.cluster - Cluster description not yet available. Waiting for 30000 ms before timing out
2017-08-14 13:33:23.290 [cluster-ClusterId{value='5991a6a33949bf5f19b0b28e', description='null'}-localhost:27017] INFO  org.mongodb.driver.connection - Opened connection [connectionId{localValue:1, serverValue:19891}] to localhost:27017
2017-08-14 13:33:23.292 [cluster-ClusterId{value='5991a6a33949bf5f19b0b28e', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, version=ServerVersion{versionList=[3, 4, 4]}, minWireVersion=0, maxWireVersion=5, electionId=7fffffff000000000000007a, maxDocumentSize=16777216, roundTripTimeNanos=953675, setName='qa3', canonicalAddress=10.20.15.35:27017, hosts=[10.20.15.35:27017, 10.20.15.73:27017, 10.20.15.164:27017], passives=[], arbiters=[], primary='10.20.15.35:27017', tagSet=TagSet{[]}}
2017-08-14 13:33:23.491 [main] INFO  c.flex.tags.migration.MongoToArango - Skipping database 'flex-tag' creation as it already exists
2017-08-14 13:33:23.504 [main] INFO  c.flex.tags.migration.MongoToArango - Collection 'tagCollections' already exists
2017-08-14 13:33:23.510 [main] INFO  c.flex.tags.migration.MongoToArango - Collection 'tags' already exists
2017-08-14 13:33:23.517 [main] INFO  c.flex.tags.migration.MongoToArango - Collection 'objects' already exists
2017-08-14 13:33:23.534 [main] INFO  c.flex.tags.migration.MongoToArango - Start : Mon Aug 14 13:33:23 UTC 2017
2017-08-14 13:33:23.664 [main] INFO  org.mongodb.driver.connection - Opened connection [connectionId{localValue:2, serverValue:19892}] to localhost:27017
       </code></pre>
        <p class="p">At this point the messages will stop. Once the migration is complete you should see a message like this:
        </p>
 
   <pre class="pre codeblock"><code>
2017-08-14 13:33:24.078 [main] INFO  c.flex.tags.migration.ArangoMigrator - Total of rejected tags : 0
2017-08-14 13:33:24.078 [main] INFO  c.flex.tags.migration.ArangoMigrator - Total of tag documents migrated : 8
2017-08-14 13:33:24.078 [main] INFO  c.flex.tags.migration.ArangoMigrator - Total of inserted docs in `tagCollections` collection: 2
2017-08-14 13:33:24.078 [main] INFO  c.flex.tags.migration.ArangoMigrator - Total of account tags collections already exists : 2
2017-08-14 13:33:24.078 [main] INFO  c.flex.tags.migration.ArangoMigrator - Total of inserted docs in `tags` collection : 7
2017-08-14 13:33:24.078 [main] INFO  c.flex.tags.migration.ArangoMigrator - Total of inserted docs in `objects` collection : 8
2017-08-14 13:33:24.078 [main] INFO  c.flex.tags.migration.MongoToArango - End : Mon Aug 14 13:33:24 UTC 2017
   </code></pre>
        <p class="p">This means the migration is now complete.</p>

    </section>

 <section class="section"><h2 class="title sectiontitle">Migration properties and configurations</h2>
     
     <p class="p"></p>

            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id_Resource-Plugins__table_zmh_2vx_w1b" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr>
                            <th class="entry nocellnorowborder" id="d266468e113">Property</th>

                            <th class="entry nocellnorowborder" id="d266468e116">Default Value</th>

                            <th class="entry cell-norowborder" id="d266468e119">Description</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.collection.objects </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> (none) </td>

                            <td class="entry cell-norowborder" headers="d266468e119 ">Flex objects collection name in ArangoDB. The objects collection
                                name is 'objects' </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.collection.tagCollections </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> (none) </td>

                            <td class="entry cell-norowborder" headers="d266468e119 ">The Tag collection's collection name in ArangoDB. The tag
                                collections collection name in Arango is 'tagCollections' </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.collection.tags </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> (none) </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> The Tags collection name in ArangoDB. The tag collections
                                collection name in Arango is 'tags' </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.db </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> test </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> ArangoDB name </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.graph </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> (none) </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> The relationship graph that is used to store object and tag
                                associations. The graph name is 'objectTagsRelationships' </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.graph.edge </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> (none) </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> The edge that is used to generate graphs. The edge collection
                                name is 'objectTagsEdge' </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.host </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> localhost </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> The host address of the ArangoDB </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> arango.port </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> 8529 </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> The port of the ArangoDB </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> mongo.batch_size </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> 20 </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> Batch size for the find query </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> mongo.collection </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> test </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> Collection name to be migrated (In our case the collection name
                                will be tags) </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> mongo.db </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> test </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> Tag Mongo Database Name. In our case the database name is
                                'flex-tag' </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> mongo.host </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> localhost </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> The host address of the MongoDB </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> mongo.port </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> 27017 </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> The port of the MongoDB </td>

                        </tr>

                        <tr>
                            <td class="entry nocellnorowborder" headers="d266468e113 "> mongo.projection </td>

                            <td class="entry nocellnorowborder" headers="d266468e116 "> (none) </td>

                            <td class="entry cell-norowborder" headers="d266468e119 "> In our case the projection value is{'objectId':1,
                                'objectType':1, 'name':1, 'accountId':1, 'workspaceId':1, 'userId':
                                1} </td>

                        </tr>

                        <tr>
                            <td class="entry row-nocellborder" headers="d266468e113 "> mongo.query </td>

                            <td class="entry row-nocellborder" headers="d266468e116 "> {} </td>

                            <td class="entry cellrowborder" headers="d266468e119 "> Query to select data </td>

                        </tr>

                    </tbody>
</table>
</div>
   
 </section>
   
    <section class="section"><h2 class="title sectiontitle"> Migration Conditions:</h2>
        
        <p class="p">1) Existing tags are MAM tags. While saving tags create tag collection based on the accountId provided in the tags. If account collection already exists ignore it just pick the tagCollectionId of the existing account tag collection and save it to tags.</p>
   
        <p class="p">2) The MAM tag migration library is a java program that will make a connection to mongo and query the tags document collection from mongo and it should save the tags to ArangoDB.</p>

        <p class="p">The old MAM tag model that we have in MongoDB is as follows:</p>

        <pre class="pre codeblock"><code> {
  "objectId": 111,
  "objectType": "media-asset",
  "name": "ooyala flex",
  "accountId": 1,
  "workspaceId": 123,
  "userId": 222
}  
        </code></pre>
        <p class="p">While migrating this Arango it should create a ACCOUNT tag collection in tagCollections collection and save the tag in tags collection. After successful migration the created ACCOUNT Tag Collection in tagCollections collection:</p>
 
       <pre class="pre codeblock"><code>
{
  "id": 123456789,           // ID of the tag collection
  "name": "account-tag-collection-1",
  "displayName": "account tag collection 1",
  "type": "ACCOUNT",
  "enabled": true,
  "accountId": 1,
  "created": "26 Jun 2017 07:34:02 +00:00",
  "lastModified": "26 Jun 2017 07:34:02 +00:00"
}     
       </code></pre> 
        <p class="p">A tag will be created in tags collection:</p>

        <pre class="pre codeblock"><code>
{
  "tagCollectionId": 123456789,  // created ACCOUNT tag collection ID
  "tag": "ooyala flex"
}  
        </code></pre>
        <p class="p">The Object will be stored in objects collection as:</p>

        <pre class="pre codeblock"><code>
{
  "objectId": 11,
  "objectType": "media-asset",
  "objectTypeId": 2
}        
        </code></pre>
        <div class="note note"><span class="notetitle">Note:</span> objectTypeId will be taken from objectType</div>
  
        <p class="p">While storing the object an edge will be created from the created tag Id to created object Id to associate both.</p>

        <div class="note note"><span class="notetitle">Note:</span> If Account tag collection already exists it should not create a new Account tag collection in database.</div>

        <div class="note note"><span class="notetitle">Note:</span> If tag already exists for a given accountId, duplicates will not be created</div>

        <div class="note note"><span class="notetitle">Note:</span> If Objects already exists, duplicates will not be created</div>

        <div class="note note"><span class="notetitle">Note:</span> MAM tags allowed any kind of tags. But the migrator will not migrate tags if it doesn't follow new the standards.</div>

    </section>

    </div>


<nav role="navigation" class="related-links"></nav></article></main></div>

                <nav role="navigation" class="col-lg-4 col-md-4 col-sm-4 col-xs-12 navbar" id="wh_side_toc">
                    
                </nav>
            </div>
            
        </div> <nav class="navbar navbar-default wh_footer">
  <div class=" footer-container text-center ">
    WebHelp output generated by <a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"> &lt;oXygen/&gt; XML Author </a>
  </div>
</nav>
 <!-- Latest compiled and minified JavaScript -->
        <script src="../oxygen-webhelp/resources/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="../oxygen-webhelp/template/resources/js/wt_default.js" type="text/javascript"></script>
        
    </body>
</html>