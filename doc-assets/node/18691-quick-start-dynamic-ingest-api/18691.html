<article class="bcls-article">
  <section class="bcls-section">
    <h2 id="Introduction">Introduction</h2>
    <p>You can do several things with the Dynamic Ingest API, but its main function is to add videos to Video Cloud. This quick start provides a simple tutorial to walk you through ingesting your first video using the API.</p>
    <p>This tutorial uses the popular command line tool called CURL for making HTTP requests. If you are not familiar with CURL, see <a href="/node/17908">Set up CURL</a>. Note that CURL installed by default and Mac and Linux systems. On Windows, you will need to install it - instructions are in the Set Up CURL guide.</p>
  </section>

  <section class="bcls-section">
  <h2 id="steps">Steps</h2>
  <h3>Get client credentials</h3>
  <p>This is a one-off step to create client credentials for the API requests. If you already have the necessary client credentials, you can skip this step.</p>
  <ol class="bcls-tasklist">
    <li>
      <p>To the <a href="https://support.brightcove.com/managing-api-authentication-credentials">Managing API Credentials</a> section of Studio.</p>
    </li>
    <li>Click <strong>Register New Application</strong></li>
    <li>
      <p>Select the appropriate account(s) and select <em>at least</em> these permissions:</p>
      <ul>
        <li>Dynamic Ingest Create</li>
        <li>Ingestion Profiles Configuration Read</li>
        <li>Ingestion Profiles Read</li>
      </ul>
    </li>
    <li><p>Copy and save the <strong>client id</strong> and <strong>client secret</strong> that are created (there is no way to get the client secret again once you close the dialog!).</p></li>
  </ol>
  <h3>Get oAuth token</h3>
  <p>The <code>client_id</code> and <code>client_secret</code> are used as username and password to get a token (basic authentication), which is used to authenticate subsequent requests.</p>
  curl --request POST \
  --url https://oauth.brightcove.com/v4/access_token \
  --user CLIENT_ID \
  --pass CLIENT_SECRET \
  --header 'content-type: application/x-www-form-urlencoded' \
  --data grant_type=client_credentials
  The JSON response contains an access_token. This is valid for 5 minutes.
  Step 3: Create video
  A call to the CMS API creates the video object in Video Cloud. The body of the request stipulates metadata like name and description.
  curl --request POST \
  --url https://cms.api.brightcove.com/v1/accounts/ACCOUNT_ID/videos/ \
  --header 'authorization: Bearer ACCESS_TOKEN' \
  --header 'content-type: application/json' \
  --data '{  "name": "My Video"}'
  The JSON response contains the newly created video's id:
  {
    "id": "123456789001",
    â€¦
  }
  Step 4: Ingest request
  A call to the Dynamic Ingest gives the location of the file to ingest:
  curl --request POST \
  --url https://ingest.api.brightcove.com/v1/accounts/ACCOUNT_ID/videos/VIDEO_ID/ingest-requests \
  --header 'authorization: Bearer ACCESS_TOKEN' \
  --header 'content-type: application/json' \
  --data '{
    "master": {
      "url": "https://server.com/file.mp4"
    },
    "callbacks": ["https://server.com/callback"]
  }'
  By including the callbacks array, notifications will be posted to https://server.com/callback. If you do not need callbacks you can remove this.</section>
</article>
