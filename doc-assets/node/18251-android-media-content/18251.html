<article class="bcls-article">
<section class="bcls-section">
<h2 id="Overview">Overview</h2>

<p>Video Cloud customers have access to their media data and metadata from Video Cloud Studio. Brightcove Player customers will supply the URL for their media content.</p>
</section>

<section class="bcls-section">
<h2 id="Video_Cloud_customers">Video Cloud customers</h2>

<p>As a Video Cloud customer, you can access your media data stored in Video Cloud Studio. For more information, see the <a href="https://github.com/BrightcoveOS/android-player-samples">Player SDK for Android code samples</a>.</p>

<h3>Retrieving media data</h3>

<p>You can retrieve your video and playlist data from your Video Cloud library by using the Playback API. For details about the API, see the <a href="/node/17906">Playback API Overview</a> document.</p>

<ol class="bcls-tasklist">
	<li>Use the <a href="https://docs.brightcove.com/android-sdk/javadoc/com/brightcove/player/edge/Catalog.html">com.brightcove.player.edge.Catalog</a> class methods to retrieve your videos and playlists from Brightcove's Playback API. Your requests can supply the video/playlist <code>ID</code> or <code>ReferenceID</code>. This service will make the URL requests and parse the returned data.</li>
	<li>
	<p>For this request, you will need a Policy Key. If you are not familiar with Policy Keys, see the <a href="/node/18003">Policy API Overview</a> document.</p>

	<aside class="bcls-aside bcls-aside--information">Because the Native SDKs do not send an origin header, you cannot use a domain-restricted Policy Key. If you try this, you will get a <code>403 Forbidden</code> response when you attempt to fetch content from your Video Cloud library.</aside>

	<p>Here is an example of how to retrieve a video using the <code>com.brightcove.player.edge.Catalog </code> class:</p>

	<pre class="line-numbers">
<code class="language-java">package com.brightcove.player.samples.exoplayer.basic;
import android.os.Bundle;
import android.util.Log;
import com.brightcove.player.edge.Catalog;
import com.brightcove.player.edge.VideoListener;
import com.brightcove.player.event.EventEmitter;
import com.brightcove.player.model.Video;
import com.brightcove.player.view.BrightcoveExoPlayerVideoView;
import com.brightcove.player.view.BrightcovePlayer;
/**
* This app illustrates how to use the ExoPlayer with the Brightcove
* Native Player SDK for Android.
*/
public class MainActivity extends BrightcovePlayer {
	private final String TAG = this.getClass().getSimpleName();
	@Override

	protected void onCreate(Bundle savedInstanceState) {
		setContentView(R.layout.activity_main);
		brightcoveVideoView = (BrightcoveExoPlayerVideoView) findViewById(R.id.brightcove_video_view);
		super.onCreate(savedInstanceState);

		// Get the event emitter from the SDK and create a catalog request to fetch a video from the
		// Brightcove Edge service, given a video id, an account id and a policy key.
		EventEmitter eventEmitter = brightcoveVideoView.getEventEmitter();
		Catalog catalog = new Catalog(eventEmitter, getString(R.string.account), getString(R.string.policy));

		catalog.findVideoByID(getString(R.string.videoId), new VideoListener() {
		  // Add the video found to the queue with add().
		  // Start playback of the video with start().
		  @Override
		  public void onVideo(Video video) {
		    Log.v(TAG, "onVideo: video = " + video);
		    brightcoveVideoView.add(video);
		    brightcoveVideoView.start();
		  }
		});
	}
}</code></pre>
	</li>
</ol>

<ol class="bcls-tasklist">
	<li>The <a href="https://docs.brightcove.com/android-sdk/javadoc/com/brightcove/player/model/Video.html">Video object</a> provides methods to retrieve media information as shown below:

	<pre class="line-numbers">
<code class="language-java">catalog.findVideoByID(getString(R.string.videoId), new VideoListener() {
  // Add the video found to the queue with add().
  // Start playback of the video with start().
  @
  Override
  public void onVideo(Video video) {
<span class="bcls-highlight">    Log.v(TAG, "onVideo: video = " + video);
    Log.v(TAG, "onVideo: videoID = " + video.getId());
    Log.v(TAG, "onVideo: videoName = " + video.getName());
    Log.v(TAG, "onVideo: videoDescription = " + video.getDescription());
    Log.v(TAG, "onVideo: videoImage = " + video.getStillImageUri());
    Log.v(TAG, "onVideo: sourceCollections = " + video.getSourceCollections());
    SourceCollection dashCollection = video.getSourceCollections().get(DeliveryType.DASH);
    if (dashCollection != null) {
      Set &lt; Source &gt; sources = dashCollection.getSources();
      for (Source source: sources) {
        if (!TextUtils.isEmpty(source.getUrl())) {
          Log.v(TAG, "onVideo: DASH source = " + source.getUrl());
        }
      }
    }</span>

    brightcoveVideoView.add(video);
    brightcoveVideoView.start();
  }
});</code></pre>

	<p>The above <code>Log()</code> methods return the following media information:</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Video object" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/android/getting-started/media-content/video-object.png" />
	<figcaption class="bcls-caption--image">Video object</figcaption>
	</figure>
	</li>
</ol>

<h3>Geo-filtered videos</h3>

<p>The Brightcove Player SDK for Android supports geo-filtered videos.</p>

<aside class="bcls-aside bcls-aside--warning">Notes:
<ul>
	<li>You need to use the Playback API when working with geo-filtered videos.</li>
	<li>The playback service will only return an error if your video is geo-filtered in Video Cloud. The error will be null if your video is geo-filtered at the CDN level.</li>
</ul>
</aside>

<p>There are two ways you can add geo-filtering to your videos to control which countries they can (or cannot) be viewed in:</p>

<ul>
	<li><a href="/node/18034">Brightcove's CMS API</a></li>
	<li><a href="/node/15476#geofilter">Video Cloud Studio's Media Module</a></li>
</ul>

<p>In your Android app, when you retrieve a video using Brightcove's edge <a href="https://docs.brightcove.com/android-sdk/javadoc/com/brightcove/player/edge/Catalog.html">Catalog</a> object (Playback API) in a country which is geo-filtered for that video, you should see this message:</p>

<pre class="line-numbers">
<code class="language-java">error { message: Access to this resource is forbidden by access policy.
client_geo: us
error_subcode: CLIENT_GEO
error_code: ACCESS_DENIED }</code></pre>
</section>

<section class="bcls-section">
<h2 id="Brightcove_Player_customers">Brightcove Player customers</h2>

<p>As a Brightcove Player customer, you will supply the URL for your video assets.</p>

<aside class="bcls-aside bcls-aside--information">For Android SDK Nougat (7.x), the Server Name Indication (SNI) extension in Android uses the <code>toASCII()</code> method to enforce restrictions on characters in hostnames for TLS connections. If you try to load a source with a US_ASCII-non-compliant hostname (e.g. the hostname contains underscores in the subdomain: test_example.example.com), you will get an exception when trying to fetch the stream.<br />
<br />
So, when loading your source file over HTTPS, the hostname of the stream must be US_ASCII compliant.</aside>

<p>Here is an example of adding a video to your video view and starting playback:</p>

<pre class="line-numbers">
<code class="language-java">import com.brightcove.player.model.DeliveryType;
import com.brightcove.player.model.Video;
import com.brightcove.player.view.BrightcoveExoPlayerVideoView;
import com.brightcove.player.view.BrightcovePlayer;
import com.brightcove.player.analytics.Analytics;
@Override
protected void onCreate(Bundle savedInstanceState) {
	super.onCreate(savedInstanceState);
	setContentView(R.layout.activity_main);
	BrightcoveVideoView brightcoveVideoView = (BrightcoveVideoView) findViewById(R.id.brightcove_video_view);

	Analytics analytics = brightcoveVideoView.getAnalytics();
	analytics.setAccount("123456789");

	MediaController controller = new MediaController(this);
	brightcoveVideoView.setMediaController(controller);
	brightcoveVideoView.add(Video.createVideo("http://solutions.brightcove.com/bcls/assets/videos/Bird_Titmouse.mp4", DeliveryType.MP4));
	brightcoveVideoView.start();
}</code></pre>
</section>
&nbsp;

<p>Next, let's take a look at how events work within the SDK architecture.</p>

<div style="text-align:center"><button class="bcls-button" type="button" title="Previous button" onclick="location.href='/node/18247';">&lt; Prev</button><button class="bcls-button" type="button" title="Next button" onclick="location.href='/node/18249';">Next &gt;</button></div>
</article>
