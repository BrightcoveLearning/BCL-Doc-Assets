<article class="bcls-article">
<section id="Overview" class="bcls-section">
<h2>Overview</h2>

<p>Definitions for clips are created using the <code>/vods</code> endpoint.</p>

<p>Clips can be created in two ways:</p>

<ul>
	<li>With start and end times defined relative to the start and end time of the whole live stream event</li>
	<li>With start and end times defined in Epoch (Unix) time (in seconds)</li>
</ul>

<p>You can also specify a <code>duration</code> of the clip with either a start or end position. If you specify just a duration without a start or end position, the clip will be taken from the end of the live stream job.</p>

<p>Clips can also be sent to multiple destinations:</p>

<ul>
	<li>A Video Cloud account</li>
	<li>An FTP server</li>
	<li>An S3 bucket</li>
</ul>
<aside class="bcls-aside bcls-aside--information">Note: clips can be created while the live stream is running. To do this, you will need to define the start and end times of the clip in Epoch time or relative to <strong>start</strong> time of the live stream.</aside>

</section>

<section id="Endpoint" class="bcls-section">
<h2>Endpoint</h2>

<p>Clips are created by sending a <code>POST</code> request to:</p>

<pre class="line-numbers">
<code class="language-http">https://api.bcovlive.io/v1/vods</code></pre>
</section>

<section id="Request_body" class="bcls-section">
<h2>Request body</h2>

<p>The request body includes start and end times, and details about where to send the clip. Here is a sample request body that creates a clip of the third minute of a stream and sends it to a Video Cloud account:</p>

<pre class="line-numbers">
<code class="language-json">{
    "live_job_id":"<span class="bcls-input">PUT-LIVE-JOB-ID-HERE</span>",
    "outputs":[
        {
            "label": "60 secs by stream from min 2 to min 3",
            "stream_start_time": 120,
            "stream_end_time": 180,
            "credentials": "<span class="bcls-input">VC_CREDENTIALS</span>",
            "videocloud": {
                "video": {
                    "name": "One Minute Clip",
                    "tags": ["live", "clip"]
                },
                "ingest": {
                    "profile": "high-resolution",
                    "capture-images": true
                }
            }
        }
    ]
}</code></pre>

<p>In this example, we are creating a clip of one-minute duration and sending it to Video Cloud. We're giving the clip a name and a couple of tags, specifying the "high-resolution" <a href="/node/18045">ingest profile</a> for retranscoding, and instructing Video Cloud to capture thumbnail and poster images from the clip during transcoding.</p>

<p>To see what fields can be included in the <code>video</code> and <code>ingest</code> objects, see the <a href="https://brightcovelearning.github.io/Brightcove-API-References/dynamic-ingest-api/v1/doc/index.html">Dynamic Ingest API Reference</a>.</p>

<aside class="bcls-aside bcls-aside--warning">Do <strong>not</strong> include the <code>master</code> field in the <code>ingest</code> object, as that information will be provided by the Live API.</aside>

<p>The <code>VC_CREDENTIALS</code> here is a reference to a set of client credentials for the Dynamic Ingest system, which are set up in your Live account by the Live team.</p>
</section>

<section id="Request_body_fields" class="bcls-section">
<h2>Request body fields</h2>

<p>Here is a full table of the request body fields.</p>

<table class="bcls-table">
	<caption class="bcls-caption--table">Request Body Fields</caption>
	<thead class="bcls-table__head">
		<tr>
			<th style="width: 30%">Field</th>
			<th style="width: 10%">Type</th>
			<th style="width: 70%">Description</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td class="code">live_job_id</td>
			<td>String</td>
			<td>
			<p>The id of Live Stream job to create the VOD clip from.</p>
			</td>
		</tr>
		<tr>
			<td class="code">outputs</td>
			<td>Object[]</td>
			<td>
			<p>Array of VOD outputs</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;label</td>
			<td>String</td>
			<td>
			<p>Label for the output</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;duration</td>
			<td>Number</td>
			<td>
			<p>Duration of the clip in seconds</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;stream_start_time</td>
			<td>Number</td>
			<td>
			<p>Start time in seconds for the clip relative to the start time of the live stream</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;stream_end_time</td>
			<td>Number</td>
			<td>
			<p>End time in seconds for the clip relative to the start time of the live stream</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;start_time</td>
			<td>Number</td>
			<td>
			<p>Start time for the clip in Epoch (Unix) time (seconds)</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;end_time</td>
			<td>Number</td>
			<td>
			<p>End time for the clip in Epoch (Unix) time (seconds)</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;url</td>
			<td>String</td>
			<td>
			<p>URL for the clip</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;credentials</td>
			<td>String</td>
			<td>
			<p>The name of the credentials configured in your account for this address</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;videocloud</td>
			<td>Object</td>
			<td>
			<p>An object containing inputs for Video Cloud ingestion</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;&nbsp;&nbsp;video</td>
			<td>Object</td>
			<td>
			<p>An object containing inputs for Video Cloud video object creation - see the <a href="https://brightcovelearning.github.io/Brightcove-API-References/dynamic-ingest-api/v1/doc/index.html#api-Video-Create_Video_Object">Dynamic Ingest Reference</a></p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;&nbsp;&nbsp;ingest</td>
			<td>Object</td>
			<td>
			<p>An object containing inputs for Video Cloud video injestion - see the <a href="https://brightcovelearning.github.io/Brightcove-API-References/dynamic-ingest-api/v1/doc/index.html#api-Ingest-Ingest_Media_Asset">Dynamic Ingest Reference</a> - do <strong>not</strong> include the <code>master</code> field, as that information will be provided by the Live API</p>
			</td>
		</tr>
	</tbody>
</table>
</section>

<section id="API_response" class="bcls-section">
<h2>API response</h2>

<p>The response to a create clip request includes an id for the job and the label you set in the request body, as well as the live job id:</p>

<pre class="line-numbers">
<code class="language-json">{
  "vod_jobs": [
    {
      "jvod_id": "9582606c50d84be5ad4bc104f2aa3360",
      "label": "last 60 secs of live job"
    }
  ],
  "live_job_id": "88ba5d87b61a4ef3a6dddabd0c38d319"
}</code></pre>

<h3>Response fields</h3>

<table class="bcls-table">
	<caption class="bcls-caption--table">Response Body Fields</caption>
	<thead class="bcls-table__head">
		<tr>
			<th style="width: 30%">Field</th>
			<th style="width: 10%">Type</th>
			<th style="width: 70%">Description</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td class="code">vod_jobs</td>
			<td>Object</td>
			<td>
			<p>The clip response object</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;jvod_id</td>
			<td>String</td>
			<td>
			<p>The clip job id</p>
			</td>
		</tr>
		<tr>
			<td class="code">&nbsp;&nbsp;label</td>
			<td>String</td>
			<td>
			<p>The clip label (from the input)</p>
			</td>
		</tr>
		<tr>
			<td class="code">live_job_id</td>
			<td>String</td>
			<td>
			<p>The clip label (from the input)</p>
			</td>
		</tr>
	</tbody>
</table>
</section>
</article>
