<article class="bcls-article">
<section class="bcls-section">
<h2 id="setup">Setup</h2>

<p>The setup for Dynamic Ingest requests is the same, whether you are ingesting a video, images, a WebVTT file, or all of these:</p>

<dl>
	<dt>Request URL</dt>
	<dd>
	<pre class="line-numbers">
<code class="language-http">https://ingest.api.brightcove.com/v1/accounts/{account_id}/videos/{video_id}/ingest-requests</code></pre>
	</dd>
	<dt>Authentication</dt>
	<dd>Authentication requires an access token passed as a <code>Bearer</code> token in an <code>Authorization</code> header:
	<pre class="line-numbers">
<code class="language-bash">Authorization: Bearer {access_token}</code></pre>
	</dd>
</dl>
</section>

<section class="bcls-section">
<h2 id="s3">Note on S3</h2>

<p>If your WebVTT will be pulled from a protected S3 bucket, you will need to set a bucket policy to allow Video Cloud to access the files. See <a href="/node/17934#setPolicy">Using Dyanamic Ingest with S3</a> for details.</p>
</section>

<section class="bcls-section">
<h2 id="ingestWebVTT">Ingest WebVTT files</h2>

<p>You can also add WebVTT captions to your video or upload them for an existing video using Dynamic Ingest:</p>

<h3>Add text tracks during video ingestion</h3>
<h4>Request URL</h4>
<pre class="line-numbers"><code class="language-http">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/ingest-requests</code></pre>
<h4>Method</h4>
<p><code>POST</code></p>
<h4>Sample request body</h4>
<pre class="line-numbers">
<code class="language-json">{
    "master": {
        "url":"http://learning-services-media.brightcove.com/videos/mp4/Water-Droplet.mp4"
    },
    "profile": "balanced-high-definition",
    "capture-images": false,
    "text_tracks": [
        {
"url": "http://learning-services-media.brightcove.com/captions/for_video/Water-in-Motion.vtt",
"srclang": "en",
"kind": "captions",
"label": "EN",
"default": true
        }
    ]
}</code></pre>

<h3>Add text tracks to an existing video</h3>
<h4>Request URL</h4>
<pre class="line-numbers"><code class="language-http">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/ingest-requests</code></pre>
<h4>Method</h4>
<p><code>POST</code></p>
<h4>Sample request body</h4>

<pre class="line-numbers">
<code class="language-json">{
    "text_tracks": [
    {
        "url": "http://learning-services-media.brightcove.com/captions/for_video/Water-in-Motion.vtt",
        "srclang": "en",
        "kind": "captions",
        "label": "EN",
        "default": true
    }
    ]
}</code></pre>

<aside class="bcls-aside bcls-aside--information">
<p>Notes:</p>

<ol>
	<li>for images and text tracks, only public HTTP or HTTPS URLs or signed S3 URLs are supported</li>
	<li>for text tracks, Dynamic Ingest adds/appends them to the video’s vtt list even if it’s a re-encode request. you should use the CMS API to manage them (update/delete)</li>
	<li>Dynamic Ingest accepts up to 100 text tracks at a time</li>
	<li>Although <code>"mime_type": "text/vtt"</code> is generally supported for WebVTT, Dynamic Ingest does <strong>not</strong> currently allow that field for ingestion of text tracks</li>
</ol>
</aside>

<h3>Adding text tracks to a remote asset video</h3>

<p>See <a href="/node/18018#addTextTracks">Adding Text Tracks to Remote Asset Videos</a>.</p>
</section>
</article>
