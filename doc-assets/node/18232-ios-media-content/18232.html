<article class="bcls-article">
<section class="bcls-section">
<h2 id="Overview">Overview</h2>

<p>Video Cloud customers have access to their media data and metadata from Video Cloud Studio. Brightcove Player customers will supply the URL for their media content.</p>
</section>

<section class="bcls-section">
<h2 id="Video_Cloud_customers">Video Cloud customers</h2>

<p>As a Video Cloud customer, you can access your media data stored in Video Cloud Studio. For more information, see the <a href="https://github.com/BrightcoveOS/ios-player-samples">Native Player SDK for iOS code samples</a>.</p>

<h3>Retrieving media data</h3>

<p>You can retrieve your video and playlist data from your Video Cloud library by using the Playback API. For details about the API, see the <a href="/node/17906">Playback API Overview</a> document.</p>

<ol class="bcls-tasklist">
<li>Use the <code>BCOVPlaybackService</code> class methods to retrieve your videos and playlists from Brightcove's Playback API. Your requests can supply the video/playlist <code>ID</code> or <code>ReferenceID</code>. This service will make the URL requests and parse the returned data.</li>
<li>For this request, you will need a Policy Key. If you are not familiar with Policy Keys, see the <a href="/node/18003">Policy API Overview</a> document.
<p>Here is an example of how to retrieve a video using the <code>BCOVPlaybackService</code> class in Swift:</p>

<pre class="line-numbers">
<code class="language-swift">import UIKit
import BrightcovePlayerSDK

let kViewControllerPlaybackServicePolicyKey = &quot;<span class="bcls-input">your policy key</span>&quot;
let kViewControllerAccountID = &quot;<span class="bcls-input">your account id</span>&quot;
let kViewControllerVideoID = &quot;<span class="bcls-input">your video id</span>&quot;
class ViewController: UIViewController, BCOVPlaybackControllerDelegate {

let sharedSDKManager = BCOVPlayerSDKManager.shared()
let playbackService = BCOVPlaybackService(accountId: kViewControllerAccountID, policyKey: kViewControllerPlaybackServicePolicyKey)
let playbackController :BCOVPlaybackController
@IBOutlet weak var videoContainerView: UIView!

required init?(coder aDecoder: NSCoder) {
	playbackController = (sharedSDKManager?.createPlaybackController())!

	super.init(coder: aDecoder)

	playbackController.delegate = self
	playbackController.isAutoAdvance = true
	playbackController.isAutoPlay = true
}

override func viewDidLoad() {
	super.viewDidLoad()
	// Do any additional setup after loading the view, typically from a nib.

	// Set up our player view. Create with a standard VOD layout.
	let playerView = BCOVPUIPlayerView(playbackController: self.playbackController, options: nil, controlsView: BCOVPUIBasicControlView.withVODLayout())

	// Install in the container view and match its size.
	playerView?.frame = self.videoContainerView.bounds
	playerView?.autoresizingMask = [.flexibleHeight, .flexibleWidth]
	self.videoContainerView.addSubview(playerView!)

	// Associate the playerView with the playback controller.
	playerView?.playbackController = playbackController

	requestContentFromPlaybackService()
}

func requestContentFromPlaybackService() {
	playbackService?.findVideo(withVideoID: kViewControllerVideoID, parameters: nil) { (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

		if let v = video {
			self.playbackController.setVideos([v] as NSArray)
		} else {
			print(&quot;ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? &quot;unknown error&quot;)&quot;)
		}
	}
}
}</code></pre>

<p>For complete samples, see the following:</p>
<ul>
	<li>
		<a href="/node/18219">Create a Simple Video App using Objective-C</a>
	</li>
	<li>
		<a href="/node/18220">Create a Simple Video App using Swift</a>
	</li>
</ul>
</li>
<li>
<p>
The <a href="https://brightcovelearning.github.io/Brightcove-API-References/ios-sdk/Protocols/BCOVVideo.html">BCOVVideo</a> object provides video metadata information as shown below:
</p>
<pre class="line-numbers">
<code class="language-swift">func requestContentFromPlaybackService() {
playbackService?.findVideo(withVideoID: kViewControllerVideoID, parameters: nil) { (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

	if let v = video {
<span class="bcls-highlight">		print(&quot;video name: \(v.properties[&quot;name&quot;] as AnyObject)&quot;)
		print(&quot;video id: \(v.properties[&quot;id&quot;] as AnyObject)&quot;)
		print(&quot;video thumbnail: \(v.properties[&quot;thumbnail&quot;] as AnyObject)&quot;)
		print(&quot;video metadata: \(v.properties)&quot;)</span>

		self.playbackController.setVideos([v] as NSArray)
	} else {
		print(&quot;ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? &quot;unknown error&quot;)&quot;)
	}
}
}</code></pre>

<p>
The above <code>print()</code> methods return the following media information:
</p>
<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Video object"   src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/media-content/video-metadata.png" />
<figcaption class="bcls-caption--image">Video object</figcaption>
</figure>
</li>
</ol>

<h3>Working with geo-filtered videos</h3>

<p>The Brightcove Player SDK for iOS supports geo-filtered videos.</p>

<aside class="bcls-aside bcls-aside--warning">The playback service will only return an error if your video is geo-filtered in Video Cloud. The error will be null if your video is geo-filtered at the CDN level. <!-- <ul>
							<li>
								You need to use the Playback API when working with geo-filtered videos.
							</li>
						</ul> --></aside>

<p>There are two ways you can add geo-filterings to your videos to control which countries they can (or cannot) be viewed in:</p>

<ul>
<li><a href="/node/18034">Brightcove's CMS API</a></li>
<li><a href="/node/15476#geofilter">Video Cloud Studio's Media Module</a></li>
</ul>

<p>In your iOS app, when you retrieve a video using Brightcove's <code>BCOVPlaybackService</code> class (Playback API) in a country which is geo-filtered for that video, you should see this message:</p>

<pre class="line-numbers">
<code class="language-swift">Error Domain=kBCOVPlaybackServiceErrorDomain Code=3 "(null)"
UserInfo={kBCOVPlaybackServiceErrorKeyAPIHTTPStatusCode=403,
kBCOVPlaybackServiceErrorKeyAPIErrors=
{type = immutable, count = 1, values = (
0 : {type = immutable dict, count = 4,
entries =&gt;
1 : message = {contents = "Access to this resource is forbidden by access policy."}
2 : {contents = "client_geo"} = us
4 : {contents = "error_subcode"} = {contents = "CLIENT_GEO"}
6 : {contents = "error_code"} = {contents = "ACCESS_DENIED"}
}
)}}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Brightcove_Player_customers">Brightcove Player customers</h2>

<p>As a Brightcove Player customer, you will supply the URL for your video assets.</p>

<p>Here is an example of adding an array of videos to the playback controller and starting playback:</p>

<pre class="line-numbers">
<code class="language-swift">override func viewDidLoad() {
super.viewDidLoad()
// Do any additional setup after loading the view, typically from a nib.

// Create an array of videos
var videoArray = [AnyObject]()
videoArray = [videoWithURL(url: NSURL(string: &quot;https://solutions.brightcove.com/bcls/assets/videos/Great_Horned_Owl.mp4&quot;)!),
						videoWithURL(url: NSURL(string: &quot;https://solutions.brightcove.com/bcls/assets/videos/Great_Blue_Heron.mp4&quot;)!)]

// Set up the player view with a standard VOD layout.
let playerView = BCOVPUIPlayerView(playbackController: self.playbackController, options: nil, controlsView: BCOVPUIBasicControlView.withVODLayout())

// Install in the container view and match its size.
playerView?.frame = self.videoContainerView.bounds
playerView?.autoresizingMask = [.flexibleHeight, .flexibleWidth]
self.videoContainerView.addSubview(playerView!)

// Associate the playerView with the playback controller.
playerView?.playbackController = playbackController

// Load the video array into the player and start video playback
playbackController.setVideos(videoArray as NSArray)
playbackController.play();
}

func videoWithURL(url: NSURL) -&gt; BCOVVideo {
// Set the delivery method for BCOVSources that belong to a video
let source:BCOVSource = BCOVSource(url: url as URL!, deliveryMethod: kBCOVSourceDeliveryHLS, properties: nil)
let video = BCOVVideo.init(source: source, cuePoints: BCOVCuePointCollection.init(array: []), properties: [NSObject:AnyObject]())
return video!
}</code></pre>

<p>For complete samples, see the following:</p>
<ul>
	<li>
		<a href="/node/18219#bp">Create a Simple Video App using Objective-C</a>
	</li>
	<li>
		<a href="/node/18220#bp">Create a Simple Video App using Swift</a>
	</li>
</ul>
</section>
&nbsp;

<p>You now have a basic understanding of the Brightcove Player SDK for iOS. Next, you can walk through the steps of building an app which uses the Player SDK</p>

<div style="text-align:center"><button class="bcls-button" type="button" title="Previous button" onclick="location.href='/node/18229';">&lt; Prev</button><button class="bcls-button" type="button" title="Next button" onclick="location.href='/node/18230';">Next &gt;</button></div>
</article>
