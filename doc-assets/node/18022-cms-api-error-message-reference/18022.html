<article class="bcls-article">
<section class="bcls-section">
<h2 id="errorMessages">General error messages</h2>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Status</th>
			<th>Name</th>
			<th>Message</th>
			<th>Cause</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>400</td>
			<td><code>INVALID_SORT</code></td>
			<td><code>Attempted to sort by invalid property: '[property name]'</code></td>
			<td>The <code>sort</code> param pointed to an invalid or non-existent field</td>
		</tr>
		<tr>
			<td>400</td>
			<td><code>INVALID_SEARCH</code></td>
			<td><code>Search string was invalid</code></td>
			<td>The search string syntax was invalid, or you failed to URIEncode the search string</td>
		</tr>
		<tr>
			<td>400</td>
			<td><code>ILLEGAL_QUERY</code></td>
			<td><code>There was a problem with the query string</code></td>
			<td>The search string syntax was invalid - example: 1) doing a <code>tags</code> search that ends with a comma or has an unclosed quote</td>
		</tr>
		<tr>
			<td>400</td>
			<td><code>BAD_VALUE</code></td>
			<td><code>Unrecognized field in the submitted data</code></td>
			<td>Spelling error or other use of non-existent field</td>
		</tr>
		<tr>
			<td>400</td>
			<td><code>AD_CONFIG_NOT_FOUND</code></td>
			<td><code>Ad config not found</code></td>
			<td>Ad configuration specified in an SSAI request was not found</td>
		</tr>
		<tr>
			<td>400</td>
			<td><code>AD_CONFIG_INACTIVE</code></td>
			<td><code>Ad config is inactive</code></td>
			<td>Ad configuration specified in an SSAI request is inactive</td>
		</tr>
		<tr>
			<td>400</td>
			<td><code>REFERENCES_EXIST</code></td>
			<td><code>This video is referenced by at least one playlist.</code></td>
			<td>You are attempting to delete a video that is included in at least one playlist.</td>
		</tr>
		<tr>
			<td>400</td>
			<td><code>SHARED_VIDEO</code></td>
			<td><code>Delete of shared video failed.</code></td>
			<td>Deletion of shared videos is not yet supported.</td>
		</tr>
		<tr>
			<td>401</td>
			<td><code>UNAUTHORIZED</code></td>
			<td><code>Permission denied.</code></td>
			<td>Missing or invalid OAuth access token. If you did supply an access token, it may not have for the approriate scope for this request</td>
		</tr>
		<tr>
			<td>403</td>
			<td><code>NOT_AVAILABLE</code></td>
			<td><code>Resource is not available.</code></td>
			<td>The resource you are requesting is temporarily unavailable - this may be a temporary condition while some kind of processing of the video is in progress, but if the message persists, contact Support.</td>
		</tr>
		<tr>
			<td>404</td>
			<td><code>NOT_FOUND</code></td>
			<td><code>Resource does not exist.</code></td>
			<td>You requested a resource that does not exist - check spelling.</td>
		</tr>
		<tr>
			<td>405</td>
			<td><code>METHOD_NOT_ALLOWED</code></td>
			<td><code>The HTTP method used for the request is not allowed for this resource</code></td>
			<td>The most common cause is sending a PUT, POST, PATCH, or DELETE to a read-only resource.</td>
		</tr>
		<tr>
			<td>409</td>
			<td><code>REFERENCE_ID_IN_USE</code></td>
			<td><code>Reference id is already in use.</code></td>
			<td>You attempted to create a video with a reference id that is already in use, or add a reference id to a video which is already used by another video.</td>
		</tr>
		<tr>
			<td>409</td>
			<td><code>CONFLICT</code></td>
			<td><code>Reference id is already in use.</code></td>
			<td>To insure uniqueness of reference ids, operations involving reference ids will lock the id for up to 30 seconds. That means that if remove a reference id from a video (or delete that video) and then try to use the reference id for another video immediately, the operation will fail with a 409 error. Please wait at least 30 seconds after getting this error before retrying the operation.</td>
		</tr>
		<tr>
			<td>409</td>
			<td><code>CONFLICT</code></td>
			<td><code>Both accounts must be enabled for media sharing.</code></td>
			<td>When a master account attempts to add an affiliate account to a channel for media sharing, <em>both</em> accounts must be enabled for media sharing.</td>
		</tr>
		<tr>
			<td>409</td>
			<td><code>SHARING_DISABLED</code></td>
			<td><code>Master account is not enabled for media sharing.</code></td>
			<td>This error will be returned if you attempt to share a video from an account that does not have media sharing enabled.</td>
		</tr>
		<tr>
			<td>422</td>
			<td><code>ILLEGAL_FIELD</code></td>
			<td><code>Unrecognized field in the submitted data</code></td>
			<td>Spelling error or other use of non-existent field</td>
		</tr>
		<tr>
			<td>422</td>
			<td><code>VALIDATION_ERROR</code></td>
			<td>(the JSON data was not valid - error messages vary depending on the problem)</td>
			<td>Examples of messages:
			<ul>
				<li>name: REQUIRED_FIELD (create a video w/o a name, update name to empty string)</li>
				<li>account_id: WRONG_ACCOUNT &nbsp;(account ID in URL does not match account ID in JSON)</li>
				<li>Invalid keys: id (the id cannot be modified and should not appear as key in the JSON)</li>
			</ul>
			</td>
		</tr>
		<tr>
			<td>429</td>
			<td><code>TOO_MANY_REQUESTS</code></td>
			<td><code>Too many requests</code></td>
			<td>You are submitting too many simultaneous requests or too many requests per second</td>
		</tr>
		<tr>
			<td>500</td>
			<td><code>UNKNOWN</code></td>
			<td><code>an unknown internal error occurred</code></td>
			<td>Issue in Brightcove system - try again later.</td>
		</tr>
		<tr>
			<td>503</td>
			<td><code>SERVICE_UNAVAILABLE</code></td>
			<td><code>The API is temporarily unavailable</code></td>
			<td>Backend issue - try again later.</td>
		</tr>
		<tr>
			<td>504</td>
			<td><code>TIMEOUT</code></td>
			<td><code>something took too long</code></td>
			<td>Server likely too busy - try again later.</td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Media_sharing_errors">Media Sharing Errors</h2>

<p>Media sharing errors are not returned as a separate error response to the API request, but rather in an <code>error_message</code> field in the normal reponse:</p>

<pre class="line-numbers">
<code class="language-json">[
    {
      "video_id" : "394872349182374",
      "affiliate_id" : "234987239487",
      "affiliate_video_id" : "30308254055202",
      "status" : "COMPLETE",
      "shared_at" : "2017-12-11T17:57:45.530Z",
      "updated_at" : "2017-12-11T18:03:32.789Z",
      "error_message" : <span class="bcls-highlight">"[{"error_code":"MISSING_CUSTOM_FIELDS","error_message":"Affiliate account is missing custom fields: [whisky]"}]"</span>
    }
]</code></pre>

<p>The <code>error_message</code> json will be an array of error objects, object will have <code>error_code</code> and <code>error_message</code>.</p>

<h3><code>error_code</code></h3>

<p>The error code will usually be sharing-specific but it could be any of the valid error codes that can be returned by a PATCH (update) operation on a video as well. The sharing specific error codes are shown in the table below.</p>

<table class="bcls-table">
	<caption class="bcls-caption--table">Media Sharing Error Codes</caption>
	<thead class="bcls-table__head">
		<tr>
			<th><code>error_code</code></th>
			<th><code>error_message</code></th>
			<th>Cause</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code>MISSING_CUSTOM_FIELDS</code></td>
			<td><code>Affiliate account is missing custom fields: [field1, field2]}</code></td>
			<td>The master has set <code>enforce_custom_fields</code> to <code>true</code>, but the video being shared references fields that do not exist in the affiliate account.</td>
		</tr>
		<tr>
			<td><code>CONFLICT</code></td>
			<td><code>Affiliate account is not configured for geo restriction.</code></td>
			<td>The master has enforce_geo set to true and their account is configured for geo-filtering, but the affiliate account is not configured for geo-filtering.</td>
		</tr>
		<tr>
			<td><code>SHARING_DISABLED</code></td>
			<td><code>Affiliate account is not enabled for media sharing.</code></td>
			<td>The master has attempted to share a video with an affiliate that is not enabled for media sharing.</td>
		</tr>
		<tr>
			<td><code>NOT_FOUND</code></td>
			<td><code>Resource does not exist.</code></td>
			<td>Something was missing. Usually this means the master video is gone. This can happen if a share request is immediately followed by a delete of the master video. This might also mean the master account does not have a channel yet or if the affiliate account does not exist or is not a valid member of the channel. This might happen if something went wrong in migration to CMS API media sharing.</td>
		</tr>
		<tr>
			<td><code>UNKNOWN</code></td>
			<td><code>Sharing failed with an unknown error, error_id INSERT-UNIQUE-ERROR-ID</code></td>
			<td>Something unexpected happened. The error_message will include an error id that can be used by devops to identify the underlying cause. Retrying the share attempt will work in many cases.</td>
		</tr>
		<tr>
			<td><code>VALIDATION_ERROR</code></td>
			<td><code>{field}: ILLEGAL_VALUE</code></td>
			<td>If {field} is "economics" then the problem is that the master video is "AD SUPPORTED" but the affiliate account does not have ads enabled. If {field} is something else, then investigation is required.</td>
		</tr>
		<tr>
			<td><code>REFERENCE_ID_IN_USE</code></td>
			<td><code>Reference id whatever-you-used is already in use.</code></td>
			<td>The reference id was valid in the master account but is already in use by the affiliate account.</td>
		</tr>
	</tbody>
</table>
</section>
</article>
